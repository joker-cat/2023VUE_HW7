import{bH as c,bL as a,u,v as e,bz as i,bo as l,bC as m,I as f,bx as h,aR as p,aE as _,H as b}from"./index-XxI7yONf.js";const g={data(){return{token:"",userInfo:{username:"",password:""}}},created(){if(a.hasItem("token")){this.$router.push("/");return}},methods:{login(){if(this.userInfo.username.trim()===""||this.userInfo.password.trim()===""){alert("欄位請確實填寫");return}this.$axios.post("https://ec-course-api.hexschool.io/v2/admin/signin",this.userInfo).then(t=>{t.data.message==="登入成功"&&(this.token=t.data.token,a.setItem("token",this.token),this.$axios.defaults.headers.common.Authorization=this.token,this.$router.push("/admin"))}).catch(t=>{alert("登入失敗"),console.log(t)})}}},w={class:"row justify-content-center text-center align-items-center",style:{height:"100vh"}},k={class:"col-5"},x=e("h2",{class:"mb-3 fs-bolder"},"請先登入",-1),v={id:"form",class:"form-signin"},I={class:"form-floating mb-3"},y=e("label",{for:"username"},"Email address",-1),C={class:"form-floating"},V=e("label",{for:"password"},"Password",-1),L=e("p",{class:"mt-5 mb-3 text-muted"},"© 2021~∞ - 六角學院",-1);function B(t,s,E,N,n,r){const d=p("RouterLink");return _(),u("div",w,[e("div",k,[x,e("form",v,[e("div",I,[i(e("input",{type:"email",class:"form-control",id:"username",placeholder:"name@example.com",required:"",autofocus:"","onUpdate:modelValue":s[0]||(s[0]=o=>n.userInfo.username=o)},null,512),[[l,n.userInfo.username]]),y]),e("div",C,[i(e("input",{type:"password",class:"form-control",id:"password",placeholder:"Password",required:"","onUpdate:modelValue":s[1]||(s[1]=o=>n.userInfo.password=o)},null,512),[[l,n.userInfo.password]]),V]),e("button",{class:"btn btn-lg btn-primary w-100 my-3",type:"submit",onClick:s[2]||(s[2]=m((...o)=>r.login&&r.login(...o),["prevent"]))}," 登入 "),f(d,{class:"btn btn-lg btn-danger w-100 mx-auto",to:"/"},{default:h(()=>[b("返回首頁")]),_:1})]),L])])}const q=c(g,[["render",B]]);export{q as default};
