import{bH as _,bL as r,bM as h,u as n,v as o,F as p,aP as b,bz as i,bo as m,bk as f,b3 as l,aE as c}from"./index-ofjNOyMn.js";const u="/2023VUE_HW7/assets/coupon-7AhySAPh.png",v={data(){return{modal:null,coupons:[],couponForm:{data:{title:"",is_enabled:0,percent:null,due_date:new Date().getTime(),code:"testCode"}}}},methods:{getCoupons(){this.$axios.get("/admin/coupons").then(d=>{this.coupons=d.data.coupons}).catch(()=>{})},createCoupon(){this.couponForm.data.is_enabled-=0,this.$axios.post("/admin/coupon",{...this.couponForm,due_date:new Date().getTime()}).then(()=>{alert("新增成功"),this.closeModal()}).catch(()=>{alert("新增失敗"),this.closeModal()})},openModal(){this.modal.show()},closeModal(){this.modal.hide()}},mounted(){r.hasItem("token")?(this.$axios.defaults.headers.common.Authorization=r.getItem("token"),this.getCoupons(),this.modal=new h.Modal(this.$refs.couponModal)):this.$router.push("/")}},x={class:"row my-4 position-relative"},k={class:"card"},g=o("img",{src:u,class:"card-img-top",alt:"img error"},null,-1),y={class:"card-body"},C={class:"card-text"},M={class:"card-text"},F={class:"card-text"},w={class:"modal modal-lg fade",ref:"couponModal"},E={class:"modal-dialog"},T={class:"modal-content"},V=o("div",{class:"modal-header"},[o("h5",{class:"modal-title fw-bolder",id:"exampleModalLabel"},"新增優惠券"),o("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),A={class:"modal-body"},D={class:"card p-2"},I={class:"row"},U=o("div",{class:"col-md-4"},[o("img",{src:u,class:"img-fluid rounded-start",alt:"..."})],-1),B={class:"col-md-8"},L={class:"card-body p-0"},z={class:"mb-3"},H=o("label",{for:"cardtitle"},"優惠券名稱",-1),P={class:"mb-3"},S=o("label",{for:"exampleInputEmail1"},"折扣趴數",-1),N={class:"mb-3 form-check"},W={class:"form-check-label",for:"exampleCheck1"},j={class:"modal-footer"},q=o("button",{type:"button",class:"btn fs-6 p-2 px-3 border border-dark","data-bs-dismiss":"modal"},"取消",-1);function G(d,s,J,K,e,a){return c(),n(p,null,[o("div",x,[(c(!0),n(p,null,b(e.coupons,t=>(c(),n("div",{class:"col-sm-4 col-6 mb-4",key:t.id},[o("div",k,[g,o("div",y,[o("p",C,"名稱 "+l(t.title),1),o("p",M,"折扣 "+l(t.percent),1),o("p",F,"狀態 "+l(t.is_enabled?"啟用":"不啟用"),1)])])]))),128)),o("button",{type:"button",class:"btn btn-dark position-absolute",style:{width:"120px",top:"-50px",right:"12px"},onClick:s[0]||(s[0]=(...t)=>a.openModal&&a.openModal(...t))}," 新增優惠券 ")]),o("div",w,[o("div",E,[o("div",T,[V,o("div",A,[o("div",D,[o("div",I,[U,o("div",B,[o("div",L,[o("form",null,[o("div",z,[H,i(o("input",{type:"text",class:"form-control",id:"cardtitle","onUpdate:modelValue":s[1]||(s[1]=t=>e.couponForm.data.title=t)},null,512),[[m,e.couponForm.data.title]])]),o("div",P,[S,i(o("input",{type:"text",class:"form-control",id:"exampleInputEmail1","onUpdate:modelValue":s[2]||(s[2]=t=>e.couponForm.data.percent=t)},null,512),[[m,e.couponForm.data.percent,void 0,{number:!0}]])]),o("div",N,[i(o("input",{type:"checkbox",class:"form-check-input",id:"exampleCheck1","onUpdate:modelValue":s[3]||(s[3]=t=>e.couponForm.data.is_enabled=t),"true-value":"1","false-value":"0"},null,512),[[f,e.couponForm.data.is_enabled]]),o("label",W,"是否啟用 "+l(typeof e.couponForm.data.is_enabled),1)])])])])])])]),o("div",j,[q,o("button",{type:"button",class:"btn fs-6 p-2 px-3 bg-dark text-light",onClick:s[4]||(s[4]=(...t)=>a.createCoupon&&a.createCoupon(...t))},"新增")])])])],512)],64)}const Q=_(v,[["render",G]]);export{Q as default};
